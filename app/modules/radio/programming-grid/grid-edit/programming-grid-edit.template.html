<div class="page-title">
    <div class="row flex-center">
        <div class="col-md-6">
            <div class="title-env">
                <h1 class="title"> 
                    Edição da grade de programação
                    <small class="helper-text"> Edite a grade de programação semanal </small>
                </h1>
            </div>
        </div>
        <div class="col-md-6">
            <div class="breadcrumb-env">
                <ol class="breadcrumb bc-1">
                    <li> <a href="#/"> <i class="fa-home"></i> Home </a> </li>
                    <li>
                        <a href="#/radio_programming_grid/view">
                            <strong>Grade</strong>
                        </a>
                    </li>
                    <li class="active">
                        <a href="#/radio_programming_grid/edit">
                            <strong>Edição da grade</strong>
                        </a>
                    </li>
                </ol>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <section class="col-sm-12 panel panel-default">
            <div class="btn-toolbar">
                <div class="focus-btn-group week-days">
                    <div ng-repeat="weekDay in vm.weekdays" class="btn" ng-class="{ 'btn-gray': weekDay.active}" ng-click="vm.changeDay(weekDay)">
                        <span ng-class="{ 'strong': weekDay.active }">{{ weekDay.label }}</span>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="form-group col-xs-12 col-md-4">
                        <label>Programa:</label>
                        <ui-select ng-model="vm.programToAdd" theme="bootstrap" class="ui-select" title="Selecione um programa para adicionar">
                            <ui-select-match placeholder="Selecione um programa para adicionar...">{{ $select.selected.program.title }}</ui-select-match>
                            <ui-select-choices repeat="program.program as program in vm.listPrograms | filter: $select.search track by $index">
                                <div ng-bind-html="program.program.title | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                    <div class="form-group col-xs-12 col-md-4">
                        <label>Dentro do programa: </label>
                        <ui-select ng-model="vm.programParent" theme="bootstrap" class="ui-select" title="Selecione um programa pai">
                            <ui-select-match placeholder="Selecione um programa pai...">{{ $select.selected.program.title }}</ui-select-match>
                            <ui-select-choices repeat="program.program as program in vm.listPrograms | filter: $select.search track by $index">
                                <div ng-bind-html="program.program.title | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-md-2">
                        <label>Ínicio:</label>
                        <input ng-model="vm.time.time_start" type="time" class="form-control">
                    </div>
                    <div class="form-group col-xs-12 col-md-2">
                        <label>Fim:</label>
                        <input ng-model="vm.time.time_end" type="time" class="form-control">
                    </div>
                    <div class="col-md-4">
                        <button ng-click="vm.addProgram(vm.programToAdd, vm.programParent, vm.time)" class="btn btn-secondary btn-add">
                            <i class="fa fa-plus"></i> Adicionar na grade de {{ vm.weekDayActive.label }}
                        </button>
                    </div>
                </div>
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th> Programas </th>
                            <th> Horário </th>
                            <th> Ações </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="odd" ng-repeat="program in (vm.listFiltered = (vm.listPrograms | filter:{week_day: vm.weekDayActive.code}))">
                            <td>{{ program.program.title }}</td>
                            <td>{{ program.time_start }} às {{ program.time_end }}</td>
                            <td class="text-center">
                                <a uib-tooltip="Editar" ng-href="#/page/edit/{{ item.id }}" class="btn btn-warning">
                                    <i class="fa fa-pencil"></i>
                                </a>
                                <a uib-tooltip="Excluir" ng-href="#/page/edit/{{ item.id }}" class="btn btn-danger">
                                    <i class="fa fa-trash"></i>
                                </a>
                            </td>
                        </tr>
                        <tr class="odd" ng-show="vm.listFiltered.length === 0">
                            <td colspan="3" class="text-center">Sem programas cadastrados para este dia.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
    </section>
</div>
